<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd">
    <changeSet author="kuehn (generated)" id="1572478074248-3">
        <createTable tableName="acme_account">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="acme_accountPK"/>
            </column>
            <column name="account_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="public_key" type="LONGTEXT">
                <constraints nullable="false"/>
            </column>
            <column name="public_key_hash" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="realm" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="VARCHAR(255)"/>
            <column name="terms_of_service_agreed" type="BIT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-4">
        <createTable tableName="acme_challenge">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="acme_challengePK"/>
            </column>
            <column name="status" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="token" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="type" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="validated" type="date"/>
            <column name="value" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="authorization_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-5">
        <createTable tableName="acme_contact">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="acme_contactPK"/>
            </column>
            <column name="contact_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="contact_url" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="account_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-6">
        <createTable tableName="acme_order">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="acme_orderPK"/>
            </column>
            <column name="certificate_url" type="VARCHAR(255)"/>
            <column name="error" type="VARCHAR(255)"/>
            <column name="expires" type="date"/>
            <column name="finalize_url" type="VARCHAR(255)"/>
            <column name="not_after" type="date"/>
            <column name="not_before" type="date"/>
            <column name="status" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="account_id" type="BIGINT"/>
            <column name="certificate_id" type="BIGINT"/>
            <column name="csr_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-7">
        <createTable tableName="authorization">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="authorizationPK"/>
            </column>
            <column name="type" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="value" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="order_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-8">
        <createTable tableName="ca_connector_config">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="ca_connector_configPK"/>
            </column>
            <column name="active" type="BIT"/>
            <column name="ca_connector_type" type="VARCHAR(255)"/>
            <column name="ca_url" type="VARCHAR(255)"/>
            <column name="config_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="default_ca" type="BIT"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="polling_offset" type="INT"/>
            <column name="secret" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-9">
        <createTable tableName="certificate">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="certificatePK"/>
            </column>
            <column name="authority_key_identifier" type="VARCHAR(255)"/>
            <column name="content" type="LONGTEXT">
                <constraints nullable="false"/>
            </column>
            <column name="content_added_at" type="date"/>
            <column name="creation_execution_id" type="VARCHAR(255)"/>
            <column name="description" type="VARCHAR(255)"/>
            <column name="fingerprint" type="VARCHAR(255)"/>
            <column name="issuer" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="revocation_execution_id" type="VARCHAR(255)"/>
            <column name="revocation_reason" type="VARCHAR(255)"/>
            <column name="revoked" type="BIT"/>
            <column name="revoked_since" type="date"/>
            <column name="serial" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="subject" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="subject_key_identifier" type="VARCHAR(255)"/>
            <column name="tbs_digest" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="type" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="valid_from" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="valid_to" type="date">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-10">
        <createTable tableName="certificate_attribute">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="certificate_attributePK"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="value" type="VARCHAR(255)"/>
            <column name="certificate_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-11">
        <createTable tableName="csr">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="csrPK"/>
            </column>
            <column name="csr_base_64" type="LONGTEXT">
                <constraints nullable="false"/>
            </column>
            <column name="is_csr_valid" type="BIT"/>
            <column name="process_instance_id" type="VARCHAR(255)"/>
            <column name="public_key_algorithm" type="VARCHAR(255)"/>
            <column name="public_key_hash" type="VARCHAR(255)"/>
            <column name="requested_on" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="signing_algorithm" type="VARCHAR(255)"/>
            <column name="status" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="subject_public_key_info_base_64" type="LONGTEXT">
                <constraints nullable="false"/>
            </column>
            <column name="x_509_key_spec" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-12">
        <createTable tableName="csr_attribute">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="csr_attributePK"/>
            </column>
            <column name="attribute_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="value" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="csr_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-13">
        <createTable tableName="identifier">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="identifierPK"/>
            </column>
            <column name="identifier_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="type" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="value" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="order_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-14">
        <createTable tableName="rdn">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="rdnPK"/>
            </column>
            <column name="csr_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-15">
        <createTable tableName="rdn_attribute">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="rdn_attributePK"/>
            </column>
            <column name="attribute_type" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="attribute_value" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="rdn_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-16">
        <createTable tableName="request_attribute">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="request_attributePK"/>
            </column>
            <column name="attribute_type" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="csr_id" type="BIGINT"/>
            <column name="holding_request_attribute_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-17">
        <createTable tableName="request_attribute_value">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="request_attribute_valuePK"/>
            </column>
            <column name="attribute_value" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="req_attr_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-18">
        <createTable tableName="selector_to_template">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="selector_to_templatePK"/>
            </column>
            <column name="comment" type="VARCHAR(255)"/>
            <column name="selector" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="template" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-19">
        <createIndex indexName="index_serial" tableName="certificate">
            <column name="serial"/>
        </createIndex>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-20">
        <createIndex indexName="index_tbs_digest" tableName="certificate">
            <column name="tbs_digest"/>
        </createIndex>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-21">
        <addForeignKeyConstraint baseColumnNames="account_id" baseTableName="acme_contact" constraintName="FK1vjsttcm4iyrnprvdjl62kecs" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="acme_account" validate="true"/>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-22">
        <addForeignKeyConstraint baseColumnNames="csr_id" baseTableName="acme_order" constraintName="FK2ewnf4x5vd2ddypp8gumjfhu1" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="csr" validate="true"/>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-23">
        <addForeignKeyConstraint baseColumnNames="csr_id" baseTableName="request_attribute" constraintName="FK3x3577uyu66l11i4vo5uh4wcp" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="csr" validate="true"/>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-24">
        <addForeignKeyConstraint baseColumnNames="order_id" baseTableName="authorization" constraintName="FK4y8dig31avmjnedwuuadvf9yi" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="acme_order" validate="true"/>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-25">
        <addForeignKeyConstraint baseColumnNames="certificate_id" baseTableName="certificate_attribute" constraintName="FK6t2ggdoei0ajw0mbo3dihb5fe" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="certificate" validate="true"/>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-26">
        <addForeignKeyConstraint baseColumnNames="account_id" baseTableName="acme_order" constraintName="FK9yae58b6lw533kt9dhpb5r1a2" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="acme_account" validate="true"/>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-27">
        <addForeignKeyConstraint baseColumnNames="req_attr_id" baseTableName="request_attribute_value" constraintName="FKbvfugfn2jmstqul3eb66gwin2" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="request_attribute" validate="true"/>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-28">
        <addForeignKeyConstraint baseColumnNames="csr_id" baseTableName="csr_attribute" constraintName="FKdgmrr98jv4ujihbmnbf931r1r" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="csr" validate="true"/>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-29">
        <addForeignKeyConstraint baseColumnNames="authorization_id" baseTableName="acme_challenge" constraintName="FKhptkqmdm0ni3wsg6g7ay3r545" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="authorization" validate="true"/>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-30">
        <addForeignKeyConstraint baseColumnNames="certificate_id" baseTableName="acme_order" constraintName="FKjmsulvhm3qcdxuemed2a9jhgj" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="certificate" validate="true"/>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-31">
        <addForeignKeyConstraint baseColumnNames="order_id" baseTableName="identifier" constraintName="FKkg1ixdas6f5qmm9u28re5h9qd" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="acme_order" validate="true"/>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-32">
        <addForeignKeyConstraint baseColumnNames="holding_request_attribute_id" baseTableName="request_attribute" constraintName="FKmiju40m62ye5ye7odrcoypti2" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="request_attribute_value" validate="true"/>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-33">
        <addForeignKeyConstraint baseColumnNames="rdn_id" baseTableName="rdn_attribute" constraintName="FKmjxvhc5s673imhukiukcqrse9" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="rdn" validate="true"/>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-34">
        <addForeignKeyConstraint baseColumnNames="csr_id" baseTableName="rdn" constraintName="FKrioc2ggef4pouk9xoolu7xv17" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="csr" validate="true"/>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-1">
        <dropUniqueConstraint constraintName="UC_JHI_USEREMAIL_COL" tableName="jhi_user"/>
        <addUniqueConstraint columnNames="email" constraintName="UC_JHI_USEREMAIL_COL" tableName="jhi_user"/>
    </changeSet>
    <changeSet author="kuehn (generated)" id="1572478074248-2">
        <dropUniqueConstraint constraintName="UC_JHI_USERLOGIN_COL" tableName="jhi_user"/>
        <addUniqueConstraint columnNames="login" constraintName="UC_JHI_USERLOGIN_COL" tableName="jhi_user"/>
    </changeSet>
</databaseChangeLog>
